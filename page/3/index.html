<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="description" content="iOS coder,Machine-learning,DJ Hong的个人博客" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     GG266的个人博客
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.jpg" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-Diary" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/09/05/Diary/"
    >Diary</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/09/05/Diary/" class="article-date">
  <time datetime="2018-09-05T06:28:00.000Z" itemprop="datePublished">2018-09-05</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/随记/">随记</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="2018年9月5日-周三"><a href="#2018年9月5日-周三" class="headerlink" title="2018年9月5日 周三"></a>2018年9月5日 周三</h3><hr>
<p>今天尝试着将小程序上传提交审核了。<br>从8月8日创建项目开始，历时将近一个月时间，算是做了点东西出来。<br>一个产品在设计伊始应该先有个原型，但是我不是产品经理，所以我就用Page画了一些简单的图形，来提现界面的雏形。<br>然后…然后就直接上手开发了。<br>可发过程中也遇到了很多问题，例如如何获取小程序的全局变量，如何去适配屏幕的高宽，单位的使用，是用px，还是rpx，等等，等等<br>不过好在，所有这些问题，在搜索引擎的帮助下基本都能解决。<br>对JS的感觉是，既陌生又熟悉，因为同时在学习Swift的缘故，发现二者还是有一些相似之处。<br>HTML和CSS是上大学那会儿学的，写的时候，还是不得不时不时查阅文档才能达到想要的效果。<br>最近，腾讯还上线了云开发，但是目前还在公测阶段，需要申请公测资格，我填写了好几次信息，都没有收到允许公测的邮件..<br>所有后面直接用了Bomb的后台云。<br>Bomb后端云的免费版每月有10万次的API调用额度，20GB的存储空间，20GB的流量，以及30条短信。<br>如果用完了或者不够用，也可以按需充值。还是蛮方便的<br>这个小项目下做来，有些感慨，在做事情之前，还是应该有相对充分的准备。<br>对于不熟悉的语言，按需学习做项目的方式，会让人特别难受，特别是前期，还处于摸索的阶段，基本上是五行代码一小查，十行代码一大查的状态。<br>小程序的页面花了大概三周的时间，每天基本只用半天的时间去写（下午学习Swift），9个页面，包括信息的展示页面，和信息的发布界面，以及个人中心页面，最后只用来两个信息展示页面…内容的展示姑且先用CVS记录，再导入数据库进行管理。是骡子是马，先拉出去溜溜看吧。<br>估计在小程序上线过程中，还会遇到一些问题，不知道会不会因为功能过于简单，直接不让上了…<br><br></p>
<h3 id="2018年9月2日-周一"><a href="#2018年9月2日-周一" class="headerlink" title="2018年9月2日 周一"></a>2018年9月2日 周一</h3><hr>
<p>使用Bomb作为小程序的后端，在线编辑数据库，亦可导入cvs的文件，非常方便使用。<br>不需要自己写后端代码，甚至连服务器都不需要部署跟购买，在满足需求的程度上够用了。</p>
<p><br></p>
<h3 id="2018年2月11日-周日"><a href="#2018年2月11日-周日" class="headerlink" title="2018年2月11日 周日"></a>2018年2月11日 周日</h3><hr>
<p>添加了Livere评论控件，从此以后文章可以被评论了：）</p>
<p><br></p>
<h3 id="2018年2月9日-周五"><a href="#2018年2月9日-周五" class="headerlink" title="2018年2月9日 周五"></a>2018年2月9日 周五</h3><hr>
<p>发现博客首页的_content内容摘要部分部分，无法点击进入文章详情。今天就在archer主题的文件里做了个小改动，实现内容的点击事件<br>实现方法也非常简单。首先需要找到首页的布局文件,其文件目录大概是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/blogRootDir/themes/archer/layout/index.ejs</span><br></pre></td></tr></table></figure></p>
<p>使用文档编辑器打开<code>index.ejs</code>文件，找到以下内容：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"abstract-content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">_content</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>改成如下代码，就搞定了：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"abstract-title"</span> <span class="attr">href</span> = <span class="string">"&lt;%- url_for(_post.path) %&gt;"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"abstract-content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">%-</span> <span class="attr">_content</span> %&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="2018年2月8日-周四"><a href="#2018年2月8日-周四" class="headerlink" title="2018年2月8日 周四"></a>2018年2月8日 周四</h3><hr>
<p>今天写下第一篇，和技术有一点点关系的博客。虽然大部分内容是通过粘贴和借鉴的。不过在排版和Markdown的语法上，还是得到了学习。<br>想对自己说，再接再厉吧。<br>以后想通过Diary这个页面，记录自己生活和学习的点滴，希望在未来的某一天，能看到自己逐步地成长。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/05/Diary/" data-id="ckhnfj2x1000k5tbukxkh0vhu"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Diary/">Diary</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Life/">Life</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/成长/">成长</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-使用Xcode的Instruments-Leaks-监测App的内存泄漏问题" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/06/20/使用Xcode的Instruments-Leaks-监测App的内存泄漏问题/"
    >使用Xcode的Instruments(Leaks)监测App的内存泄漏问题</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/06/20/使用Xcode的Instruments-Leaks-监测App的内存泄漏问题/" class="article-date">
  <time datetime="2018-06-20T08:58:13.000Z" itemprop="datePublished">2018-06-20</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>最近项目提交App Store审核，有些闲暇时间，打算用Instruments工具里的Leaks<br>检查一下项目中存在的内存泄漏问题。</p>
<h4 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h4><h5 id="1-edit-scheme"><a href="#1-edit-scheme" class="headerlink" title="1.edit scheme"></a>1.edit scheme</h5><p>修改为测试环境<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayq6uqwk2j30jk0e4gnd.jpg" alt=""><br>将Profile中的Build Configuration选为Debug<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayq6ull6nj31ds0s0whn.jpg" alt=""></p>
<h5 id="2-Debug-Information-Format"><a href="#2-Debug-Information-Format" class="headerlink" title="2.Debug Information Format"></a>2.Debug Information Format</h5><p>设置调试运行的时候生成 dSYM文件（用于代码定位）</p>
<p><code>Build Settings --&gt; Debug Information Format</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqazbj7qj31jn0u0k00.jpg" alt=""></p>
<h4 id="二、开始监测"><a href="#二、开始监测" class="headerlink" title="二、开始监测"></a>二、开始监测</h4><h5 id="1-打开Instruments"><a href="#1-打开Instruments" class="headerlink" title="1.打开Instruments"></a>1.打开Instruments</h5><p>在Xcode的导航栏中找到Instruments。</p>
<p><code>Xcode --&gt; Open Developer Tool --&gt; Instruments</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqbb0inkj30qg0gegsf.jpg" alt=""></p>
<h5 id="2-双击选择Leaks"><a href="#2-双击选择Leaks" class="headerlink" title="2.双击选择Leaks"></a>2.双击选择Leaks</h5><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqbamrugj316s0o278d.jpg" alt=""></p>
<h5 id="3-选择设备和项目"><a href="#3-选择设备和项目" class="headerlink" title="3.选择设备和项目"></a>3.选择设备和项目</h5><p>找到运行的设备和正在运行的项目。</p>
<p>选好设备和项目，点击左侧的大红点，项目会在对应的设备中重新运行一次。并做好监测准备<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqbac3owj31ka0u0n43.jpg" alt=""></p>
<h5 id="4-内存监测"><a href="#4-内存监测" class="headerlink" title="4.内存监测"></a>4.内存监测</h5><p>由于Leaks是动态监测，所以需要一边手动操作App，一边观察Leaks界面上的变化。当出现红色叉叉时，说明出现了内存泄漏，可以暂停进程，进行查看<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqba1hkvj30sc0kg40a.jpg" alt=""></p>
<p>5.定位内存泄漏的位置<br>选择 <code>Leaks ——&gt; Call Tree</code>，最底下会出现4个选框<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqcb41w2j31gu0u0wjr.jpg" alt=""></p>
<p>5.1 点击第二个<code>Call Tree</code>，勾选 <code>Invert Call Tree</code> 和 <code>Hide System Libraries</code></p>
<p><strong>勾选前</strong><br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqcan6nrj31ha0u0n3k.jpg" alt=""></p>
<p><strong>勾选后</strong><br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqc9pgknj31hj0u0aj8.jpg" alt=""></p>
<h5 id="6-确认位置，修改代码"><a href="#6-确认位置，修改代码" class="headerlink" title="6.确认位置，修改代码"></a>6.确认位置，修改代码</h5><p>此时显示的就是若干条内存泄漏的代码部分，选择其中一条双击，即可显示代码。还可直接跳转到代码在Xcode中额具体位置<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqc9daqlj31hc0u0gw8.jpg" alt=""></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/20/使用Xcode的Instruments-Leaks-监测App的内存泄漏问题/" data-id="ckhnfj2xh001o5tbu5n7somv4"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Instruments/">Instruments</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Leaks/">Leaks</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Xcode/">Xcode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/内存泄漏/">内存泄漏</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/调试优化/">调试优化</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-RunLoop实践" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/03/04/RunLoop实践/"
    >RunLoop实践</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/03/04/RunLoop实践/" class="article-date">
  <time datetime="2018-03-04T07:20:43.000Z" itemprop="datePublished">2018-03-04</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h4 id="（一）RunLoop的用途"><a href="#（一）RunLoop的用途" class="headerlink" title="（一）RunLoop的用途"></a>（一）RunLoop的用途</h4><h5 id="1-常驻线程"><a href="#1-常驻线程" class="headerlink" title="1.常驻线程"></a>1.常驻线程</h5><ul>
<li>保证线程不死。</li>
<li>一般来说执行完任务的线程会被销毁。而被strong强引用的线程执行完任务也会进入销亡状态，也无法使用了</li>
<li>所以可以通过RunLoop使线程常驻</li>
<li>RunLoop底层是一个死循环，但是它能监听到外部的事件</li>
<li>注意：如果一个RunLoop不包含任何Timer、Source、Observer。就会自我销亡。</li>
<li>子线程里的RunLoop启动需要满足两个条件</li>
<li>RunLoop中有东西</li>
<li>手动run（启动）</li>
<li>启动RunLoop之前，最好用@autoreleasepool{}包住</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">[super viewDidLoad];</span><br><span class="line"></span><br><span class="line">//创建线程</span><br><span class="line">self.thread = [[NSThread alloc]initWithTarget:self selector:@selector(run) object:nil];</span><br><span class="line">//开始执行线程任务</span><br><span class="line">[self.thread start];</span><br><span class="line">&#125;</span><br><span class="line">-(void)run&#123;</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;------run-----&quot;);</span><br><span class="line"></span><br><span class="line">@autoreleasepool&#123;</span><br><span class="line">//每条线程都有唯一的与之对应的RunLoop对象</span><br><span class="line">//获取（创建）当前子线程的RunLoop</span><br><span class="line">//并为RunLoop添加 Source事件源(有基于Port的数据源)</span><br><span class="line">//如果RunLoop不包含任何Timer、Source、Observer，它就会自我销亡</span><br><span class="line">[[NSRunLoop currentRunLoop] addPort:[NSPort port] forMode:NSDefaultRunLoopMode];</span><br><span class="line">//启动当前RunLoop，使其保持运行状态（即底层死循环），但依旧能监听外部事件</span><br><span class="line">[[NSRunLoop currentRunLoop] run];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;这句话，按道理是执行不到的&quot;);</span><br><span class="line">&#125;</span><br><span class="line">-(void)test&#123;</span><br><span class="line">NSLog(@&quot;--------test--%@&quot;,[NSThread currentThread]);</span><br><span class="line">&#125;</span><br><span class="line">-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;</span><br><span class="line">//在同一个线程中执行test方法</span><br><span class="line">[self performSelector:@selector(test) onThread:self.thread withObject:nil waitUntilDone:NO];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="（二）RunLoop面试题"><a href="#（二）RunLoop面试题" class="headerlink" title="（二）RunLoop面试题"></a>（二）RunLoop面试题</h4><h5 id="1-什么是RunLoop"><a href="#1-什么是RunLoop" class="headerlink" title="1.什么是RunLoop"></a>1.什么是RunLoop</h5><ul>
<li>从字面看：就是运行循环</li>
<li>从内部看，就是do-while循环，在这个循环内部不断地处理各种任务（比如Source、Timer、Observer）</li>
<li>一个线程对应一个RunLoop，主线程的RunLoop默认已经启动，子线程的RunLoop需要手动启动（调用run方法）</li>
<li>RunLoop只能选择一个模式启动，如果当前RunLoop没有任何内容，RunLoop将自动退出内部循环</li>
</ul>
<h5 id="2-为RunLoop添加的自动释放池什么时候释放"><a href="#2-为RunLoop添加的自动释放池什么时候释放" class="headerlink" title="2.为RunLoop添加的自动释放池什么时候释放"></a>2.为RunLoop添加的自动释放池什么时候释放</h5><ul>
<li>在RunLoop顺面之前释放（kCFRunLoopBeforeWaiting）</li>
</ul>
<h5 id="3-使用场景"><a href="#3-使用场景" class="headerlink" title="3.使用场景"></a>3.使用场景</h5><ul>
<li>开启常驻线程（让一个子线程不进入销亡状态，等待其他线程发来消息，处理其他事件）</li>
<li>在子线程开启一个定时器</li>
<li>在子线程中进行一些长期监控</li>
<li>可以控制定时器在特定模式下执行</li>
<li>可以让某些事件（行为、任务）在特定模式下执行</li>
<li>可以添加Observer监听RunLoop的状态，比如监听点击事件的处理（在所有点击事件之前做一些事情）</li>
</ul>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/04/RunLoop实践/" data-id="ckhnfj2x900155tbuvn5ypf8n"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RunLoop/">RunLoop</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-RunLoop理论" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/03/04/RunLoop理论/"
    >RunLoop理论</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/03/04/RunLoop理论/" class="article-date">
  <time datetime="2018-03-04T07:20:39.000Z" itemprop="datePublished">2018-03-04</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h4 id="（一）概念"><a href="#（一）概念" class="headerlink" title="（一）概念"></a>（一）概念</h4><ul>
<li>运行循环</li>
<li>保持程序持续运行</li>
<li>处理app的各种事件（比如触摸事件、定时器事件、Selector事件）</li>
</ul>
<h5 id="1-RunLoop与线程"><a href="#1-RunLoop与线程" class="headerlink" title="1.RunLoop与线程"></a>1.RunLoop与线程</h5><ul>
<li>每条线程都有唯一的与之对应的RunLoop对象</li>
<li>主线程的RunLoop是自动创建好的，子线程的RunLoop需要手动创建</li>
<li>RunLoop在第一次获取时创建，在线程结束时销毁。而如果该RunLoop不包含任何Timer、Source、Observer，它就会自我销亡</li>
</ul>
<h4 id="（二）RunLoop相关类"><a href="#（二）RunLoop相关类" class="headerlink" title="（二）RunLoop相关类"></a>（二）RunLoop相关类</h4><ul>
<li>在 CoreFoundation 里面关于 RunLoop 有5个类:</li>
<li>CFRunLoopRef</li>
<li>CFRunLoopModeRef</li>
<li>CFRunLoopSourceRef：事件源</li>
<li>CFRunLoopTimerRef：基于时间的触发器</li>
<li>CFRunLoopObserverRef：观察者</li>
</ul>
<h5 id="1-获取RunLoop对象"><a href="#1-获取RunLoop对象" class="headerlink" title="1.获取RunLoop对象"></a>1.获取RunLoop对象</h5><ul>
<li>Foundation</li>
<li>[NSRunLoop currentRunLoop]; //获取当前线程的RunLoop对象</li>
<li>[NSRunLoop mainRunLoop]; //获得主线程的RunLoop对象</li>
<li>Core Foundation</li>
<li>CFRunLoopGetCurrent(); //获取当前线程的RunLoop对象</li>
<li>CFRunLoopGetMain(); //获得主线程的RunLoop对象</li>
</ul>
<h4 id="（三）CFRunLoopModeRef"><a href="#（三）CFRunLoopModeRef" class="headerlink" title="（三）CFRunLoopModeRef"></a>（三）CFRunLoopModeRef</h4><h5 id="1-常用Mode"><a href="#1-常用Mode" class="headerlink" title="1.常用Mode"></a>1.常用Mode</h5><ul>
<li>NSDefaultRunLoopMode：App的默认Mode，通常主线程是在这个Mode下运行</li>
<li>UITrackingRunLoopMode：界面跟踪Mode。用于追踪ScrollView的触摸滑动事件，保证界面滑动时不收其他Mode影响。</li>
<li>NSRunLoopCommonModes：这是一个占位用的Mode(综合以上两种模式)，不是一中真正的Mode。</li>
</ul>
<h5 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h5><ul>
<li>一个 RunLoop 包含若干个 Mode（模式），每个 Mode 又包含若干个Source/Timer/Observer。每次调用 RunLoop 的主函数时，只能指定一个 Mode，这个Mode被称作 CurrentMode（当前模式）。如果需要切换 Mode，只能退出当前 Loop，再重新指定一个 Mode 进入。这样做主要是为了分隔开不同组的 Source/Timer/Observer，让其互不影响。</li>
</ul>
<h4 id="（四）CFRunLoopSourceRef"><a href="#（四）CFRunLoopSourceRef" class="headerlink" title="（四）CFRunLoopSourceRef"></a>（四）CFRunLoopSourceRef</h4><h5 id="1-按官方文档分类"><a href="#1-按官方文档分类" class="headerlink" title="1.按官方文档分类"></a>1.按官方文档分类</h5><ul>
<li>Port-Base Source：继续端口的，与其他线程进行交互</li>
<li>Custom Input Source</li>
<li>Cocoa Perform Selector Source</li>
</ul>
<h5 id="2-根据函数调用栈分类："><a href="#2-根据函数调用栈分类：" class="headerlink" title="2.根据函数调用栈分类："></a>2.根据函数调用栈分类：</h5><ul>
<li>Source0：非基于Port的。</li>
<li>Source1：基于Port的，通过内核和其他线程通信，接受、分发系统事件。</li>
<li>Source1接收到事件后，会交给Source0去处理</li>
</ul>
<h4 id="（五）CFRunLoopTimerRef"><a href="#（五）CFRunLoopTimerRef" class="headerlink" title="（五）CFRunLoopTimerRef"></a>（五）CFRunLoopTimerRef</h4><ul>
<li>CFRunLoopTimerRef基本上就是NSTimer，它受RunLoop的Mode影响。</li>
<li>GCD的定时器不受RunLoop的Mode影响。</li>
<li><p>① NSTimer默认加入RunLoop，且是NSDefaultRunLoopMode。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//调用了scheduledTimer返回的定时器，已经自动被添加到当前RunLoop中，默认是NSDefaultRunLoopMode</span><br><span class="line">NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(run) userInfo:nil repeats:YES];</span><br><span class="line"></span><br><span class="line">// 修改模式</span><br><span class="line">[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];</span><br></pre></td></tr></table></figure>
</li>
<li><p>②三种模式分析</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NSTimer *timer = [NSTimer timerWithTimeInterval:2.0 target:self selector:@selector(run) userInfo:nil repeats:YES];</span><br><span class="line">// 定时器只运行在NSDefaultRunLoopMode下，一旦RunLoop进入其他模式，这个定时器就不会工作</span><br><span class="line">[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];</span><br><span class="line"></span><br><span class="line">// 定时器只运行在UITrackingRunLoopMode下，一旦RunLoop进入其他模式，这个定时器就不会工作</span><br><span class="line">[[NSRunLoop currentRunLoop] addTimer:timer forMode:UITrackingRunLoopMode];</span><br><span class="line"></span><br><span class="line">// 定时器会跑在标记为common modes的模式下</span><br><span class="line">// 标记为common modes的模式：UITrackingRunLoopMode和NSDefaultRunLoopMode</span><br><span class="line">[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="（六）Oberserver（观察者）"><a href="#（六）Oberserver（观察者）" class="headerlink" title="（六）Oberserver（观察者）"></a>（六）Oberserver（观察者）</h4><ul>
<li>CFRunLoopObserverRef是观察者，能够监听RunLoop的状态改变</li>
<li>可以监听以下几个时间点：<br>CFRunLoopActivity的取值<br>kCFRunLoopEntry = (1UL &lt;&lt;0),<br>kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1),<br>kCFRunLoopBeforeSources = (1UL &lt;&lt; 2),<br>kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5),<br>kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6),<br>kCFRunLoopExit = (1UL &lt;&lt; 7),<br>kCFRunLoopAllActivities = 0x0FFFFFFFU</li>
</ul>
<h5 id="1-CFRunLoopObserverRef的使用"><a href="#1-CFRunLoopObserverRef的使用" class="headerlink" title="1.CFRunLoopObserverRef的使用"></a>1.CFRunLoopObserverRef的使用</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (void)observer&#123;</span><br><span class="line">// 1. 创建observer</span><br><span class="line">CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(CFAllocatorGetDefault(), kCFRunLoopAllActivities, YES, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) &#123;</span><br><span class="line">NSLog(@&quot;----监听到RunLoop状态发生改变---%zd&quot;, activity);</span><br><span class="line">&#125;);</span><br><span class="line">// 2. 添加观察者：监听RunLoop的状态</span><br><span class="line">CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopDefaultMode);</span><br><span class="line"></span><br><span class="line">// 3. 释放Observer</span><br><span class="line">CFRelease(observer);</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">CF的内存管理（Core Foundation）</span><br><span class="line">1.凡是带有Create、Copy、Retain等字眼的函数，创建出来的对象，都需要在最后做一次release</span><br><span class="line">* 比如CFRunLoopObserverCreate</span><br><span class="line">2.release函数：CFRelease(对象);</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<h4 id="（七）RunLoop整体处理逻辑"><a href="#（七）RunLoop整体处理逻辑" class="headerlink" title="（七）RunLoop整体处理逻辑"></a>（七）RunLoop整体处理逻辑</h4><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1foxdggdlw4j30n20hen3v.jpg" alt=""></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/04/RunLoop理论/" data-id="ckhnfj2x7000y5tbu9qqb9bww"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RunLoop/">RunLoop</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-多线程的理解——队列与执行方式" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/03/03/多线程的理解——队列与执行方式/"
    >多线程的理解——队列与执行方式</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/03/03/多线程的理解——队列与执行方式/" class="article-date">
  <time datetime="2018-03-03T03:01:06.000Z" itemprop="datePublished">2018-03-03</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>多线程的理解——队列与执行方式</p>
<h4 id="1-队列类型"><a href="#1-队列类型" class="headerlink" title="1.队列类型"></a>1.队列类型</h4><ul>
<li>串行队列：顺序执行，一次执行一个任务。依次从队列中取出一个任务执行，必须一个任务执行完了，才能从队列里面取出下一个任务。</li>
<li>并行队列：任务是按照加入到队列中的顺序开始执行，但任务完成时的顺序是不确定的。</li>
<li>主队列：主线程中的串行队列（系统默认创建）。</li>
<li>全局队列：是全局的并行队列（系统默认创建。几乎等效于并行队列）。<br><br></li>
</ul>
<h4 id="2-执行方式"><a href="#2-执行方式" class="headerlink" title="2.执行方式"></a>2.执行方式</h4><ul>
<li>同步执行sync：不开新线程</li>
<li>异步执行async：开辟新线程<br><br></li>
</ul>
<h4 id="3-队列与执行方式"><a href="#3-队列与执行方式" class="headerlink" title="3.队列与执行方式"></a>3.队列与执行方式</h4><ul>
<li>串行队列同步执行：不开线程，在原来线程里面一个一个顺序执行</li>
<li>串行队列异步执行：开一条线程，在这个新线程里面一个一个顺序执行</li>
<li>并行队列同步执行：不开线程，在原来线程里面执行</li>
<li>并行队列异步执行：开多个线程，并发执行（不一定是一个一个）执行<br><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fozfz2vff0j313o0c8dm6.jpg" alt=""><br><br></li>
</ul>
<h4 id="4-死锁问题"><a href="#4-死锁问题" class="headerlink" title="4.死锁问题"></a>4.死锁问题</h4><p>死锁问题的理解，可参考：<a href="https://www.jianshu.com/p/bd574fd21da5" target="_blank" rel="noopener">《为什么dispatch_sync在主线程会死锁》</a></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/03/多线程的理解——队列与执行方式/" data-id="ckhnfj2xi001q5tbue1fcx7d1"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/多线程/">多线程</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-智能家居场景设想" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/02/12/智能家居场景设想/"
    >智能家居场景设想</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/02/12/智能家居场景设想/" class="article-date">
  <time datetime="2018-02-12T03:51:50.000Z" itemprop="datePublished">2018-02-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech/">Tech</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>新家还在装修中，总体格局是一个上下135平米左右的复式房<br>个人非常喜欢“科技改变生活”这句话<br>近两年智能家居已经不仅仅是概念性的名词<br>BAT、京东、苏宁、小米、苹果、谷歌、微软、亚马逊各大科技巨头厂商都已设下布局<br>而我的目光就首先锁定了为“发烧而生”的小米身上。<br>这两年，小米推出的商品可以说能够涉及到我们生活的各个场景。<br>作为科技厂商，智能家居产品，也是“顺理成章”地出现在小米商城的货架上。<br>我收集整理了一下，“米家有品”里成列的和智能家居有关，而我可能会用得到的产品，详情在另一篇博文中可见：<a href="http://gg266.tech/2018/02/09/%E5%B0%8F%E7%B1%B3%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E8%AE%BE%E5%A4%87%E6%B8%85%E5%8D%95%EF%BC%88%E8%87%AA%E7%94%A8%E7%89%88%EF%BC%89/" target="_blank" rel="noopener">《小米智能家居设备清单（自用版）》</a><br><br>当然，我也不是完全跪舔米家的产品（因为没收钱呐）！看过产品下面的评论后，我觉得，米家的智能产品虽说不少，价格也很亲民，但也有几个让我在购买前担心的点：例如买了产品后的预约安装啦，或者是产品本身的质量怎么样，不会有几天就废了吧~~</p>
<h3 id="场景构思："><a href="#场景构思：" class="headerlink" title="场景构思："></a>场景构思：</h3><h4 id="灯："><a href="#灯：" class="headerlink" title="灯："></a>灯：</h4><p>1.进入大门，通过门窗感应，开灯<br><br>2.进入大门，通过按钮，一键开关灯<br><br>3.随处，通过语音或APP开关灯（语音可能需要搭配智能音箱）<br><br>场景：客厅、餐厅过道、主卧、楼梯、二楼平台、阳台、洗手间*2。共8个<br><br>设备：Aqara智能墙壁开关（零火线版）<br><br>单键：129元/个<br><br>双键：149元/个<br></p>
<h4 id="电视："><a href="#电视：" class="headerlink" title="电视："></a>电视：</h4><p>1.通过语音或APP控制电视的开关<br><br>场景：主卧、客厅<br><br>设备：万能遥控器、智能插座<br></p>
<h4 id="空调（中央空调）："><a href="#空调（中央空调）：" class="headerlink" title="空调（中央空调）："></a>空调（中央空调）：</h4><p>1.通过APP和语音控制空调的开关<br><br>场景：所有地方<br><br>设备：万能遥控器、智能插座</p>
<h4 id="窗帘："><a href="#窗帘：" class="headerlink" title="窗帘："></a>窗帘：</h4><p>1.使用APP和语音控制<br><br>设备：窗帘电机</p>
<p><br><br><br><br><br><br>后期还会考虑其他厂商的智能家居产品和解决方案<br><br>不定期更新，未完待续…</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/12/智能家居场景设想/" data-id="ckhnfj2xo00245tbuepjpnrhm"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/智能家居/">智能家居</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-小米智能家居设备清单（自用版）" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/02/09/小米智能家居设备清单（自用版）/"
    >小米智能家居设备清单（自制自用版）</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/02/09/小米智能家居设备清单（自用版）/" class="article-date">
  <time datetime="2018-02-09T01:50:25.000Z" itemprop="datePublished">2018-02-09</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech/">Tech</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="小米AI音响"><a href="#小米AI音响" class="headerlink" title="小米AI音响"></a>小米AI音响</h3><ul>
<li>小AI同学</li>
</ul>
<h3 id="家电"><a href="#家电" class="headerlink" title="家电"></a>家电</h3><ul>
<li>空气净化器<br>   – &nbsp; 型号待定</li>
<li>净水器<br>   – &nbsp; 厨下式（首选）<br>   – &nbsp; 厨上式</li>
<li>生活电器<br>   – &nbsp; 扫地机器人</li>
</ul>
<h3 id="智能"><a href="#智能" class="headerlink" title="智能"></a>智能</h3><ul>
<li>智能家居套装<br>  – &nbsp; Aqara智能卧室套装<br>￼<img src="https://tva1.sinaimg.cn/large/006tNbRwly1gaypypp12vj30u00ycae1.jpg" alt="Aqara智能卧室套装"><br>  – &nbsp; 米家智能家庭礼品装<br>￼<img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayq0hqhz1j30u00xodkr.jpg" alt="米家智能家庭礼品装"><br>  – &nbsp; 米家智能看护套装<br>￼<img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayq12u5ggj30w80t80vn.jpg" alt="米家智能看护套装"><br>  – &nbsp; 米家智能温控套装<br>￼<img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayq12o7h6j30uu0u0q4w.jpg" alt="    米家智能温控套装"></li>
<li>安防<br>  – &nbsp; 米家门窗传感器<br>  – &nbsp; 天然气报警器</li>
<li>网关/传感器<br>  – &nbsp; Aqara窗帘电机<br>  – &nbsp; 温湿度计（有无屏幕）<br>  – &nbsp; 米家多功能网关<br>  – &nbsp; 人体传感器（米家、Aqara）<br>  – &nbsp; 小米万能遥控器</li>
<li>开关插座<br>  – &nbsp; 智能（墙壁）插座<br>  – &nbsp; 智能（无线）开关</li>
</ul>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/09/小米智能家居设备清单（自用版）/" data-id="ckhnfj2xk001v5tbu9x9d4vue"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/智能家居/">智能家居</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-Mac上搭建基于GitHub的Hexo博客" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/02/08/Mac上搭建基于GitHub的Hexo博客/"
    >Mac上搭建基于GitHub的Hexo博客</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/02/08/Mac上搭建基于GitHub的Hexo博客/" class="article-date">
  <time datetime="2018-02-08T06:32:18.000Z" itemprop="datePublished">2018-02-08</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Hexo/">Hexo</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>2017农历的最后几天，项目都完成得差不多了。想着建立一个自己的博客，花了两天时间，在网上搜索各种资料，总算是把个人博客建起来了。过程就是不断试错，是在进行不下去了，就推翻重来。本人是一枚iOS coder，工作机是一台Mac，所以就讲讲在macOS系统上如何基于<a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a>+<a href="https://github.com/" target="_blank" rel="noopener">Github</a>创建个人博客。文章开始前，需要提醒一下，文中出现的<code>$</code>符号，在终端中都是不需要输入或粘贴的。</p>
<h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><h3 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h3><p>用来生成静态页面。可直接在<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js官网</a>，下载镜像安装。</p>
<h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><p>用来提交本地的Hexo内容到Github上。<br>电脑上如果已经装了Xcode，可不比进行本步骤，因为Xcode自带git。<br>如果没有Xcode，可以使用 <a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a>, <a href="https://www.macports.org/" target="_blank" rel="noopener">MacPorts</a> ：brew install git;或下载 <a href="https://sourceforge.net/projects/git-osx-installer/" target="_blank" rel="noopener">安装程序</a> 安装<br>如果不是iOS开发者，其实真的没必要为了建站下一个好几G的Xcode</p>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<p>这里如果报错，可以尝试sudo命令。输入管理员密码（Mac登录密码）即开始安装。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>终端cd到一个你选定的目录（Mac支持直接将文件或文件夹拖入终端，直接显示路径），然后执行<code>hexo init</code>命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> hexo init blogName</span><br></pre></td></tr></table></figure></p>
<p>这里需要提一下，如果需要把博客的根目录文件夹建在桌面上：cd到桌面，然后执行<code>hexo init blogName</code>命令即可。系统会创建blogName这个目录在桌面上。<br>下一步，cd到<code>blogName</code>，执行安装命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm install</span><br></pre></td></tr></table></figure></p>
<p>安装完毕后，指定文件夹的目录如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure></p>
<p>此时，可开启hexo服务器<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> hexo server</span><br><span class="line">简写：</span><br><span class="line"><span class="meta">$</span> hexo s</span><br></pre></td></tr></table></figure></p>
<p>服务器成功开启。系统会提示<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure></p>
<p>此时，在可以在浏览器中输入<code>http://localhost:4000/</code> 或 <code>127.0.0.1:4000</code> ，如果出现了下图页面，就说明已获得“阶段性”的成功。<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gaypwewni6j31dq0u0b29.jpg" alt="hexo_default_page"></p>
<h2 id="关联Github"><a href="#关联Github" class="headerlink" title="关联Github"></a>关联Github</h2><h3 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h3><p>在自己的GitHub账户上创建一个新的仓库（repository）<br>命名规则为：<code>你的用户名.github.io</code>，如<code>a334713698.github.io</code></p>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>在blogName文件中，找到名为<code>_config.yml</code>的文件，使用任意文本编辑器打开此文件。<br>找到如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type:</span><br></pre></td></tr></table></figure></p>
<p>可通过键盘<code>command+F</code>，调起编辑器的搜索功能，查找“deploy”字段<br>并将内容填充为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: https://github.com/a334713698/a334713698.github.io.git</span><br></pre></td></tr></table></figure></p>
<p>注意：<code>repository:</code>后填写的应该是自己的创建的仓库地址。</p>
<h3 id="生成静态页面"><a href="#生成静态页面" class="headerlink" title="生成静态页面"></a>生成静态页面</h3><p>此时应保证自己在blogName根目录下。如果不在指定目录，在终端上输入cd ，再直接将指定文件夹拖进终端，即可获取文件夹路径，按下回车，进入指定目录下。<br>接着执行<code>generate</code>命令：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> hexo generate</span><br><span class="line">简写：</span><br><span class="line"><span class="meta">$</span> hexo g</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">若出现如下报错：</span><br><span class="line">ERROR Local hexo not found in ~/blog</span><br><span class="line">ERROR Try runing: &apos;npm install hexo --save&apos;</span><br><span class="line"></span><br><span class="line">则执行命令：</span><br><span class="line">$ npm install hexo --save</span><br><span class="line"></span><br><span class="line">若无报错，自行忽略此步骤。</span><br></pre></td></tr></table></figure>
<h3 id="部署网页到git上"><a href="#部署网页到git上" class="headerlink" title="部署网页到git上"></a>部署网页到git上</h3><p>执行部署的命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> hexo deploy</span><br><span class="line">简写：</span><br><span class="line"><span class="meta">$</span> hexo d</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">若执行命令hexo deploy仍然报错：</span><br><span class="line">无法连接git或找不到git</span><br><span class="line"></span><br><span class="line">则执行命令：</span><br><span class="line">$ npm install hexo-deployer-git --save  </span><br><span class="line"></span><br><span class="line">然后再次执行</span><br><span class="line">$ hexo generate //生成静态页面</span><br><span class="line">$ hexo deploy   //部署到git</span><br><span class="line"></span><br><span class="line">tip：静态页面生成和部署两个步骤可以合并写成：</span><br><span class="line">$ hexo g -d</span><br></pre></td></tr></table></figure>
<p>若未关联过Github，则执行hexo deploy命令时终端会提示你输入Github的用户名和密码，正确填写GitHub的账号密码即可。<br><code>hexo deploy</code>部署成功后，浏览器中打开网址 <a href="http://a334713698.github.io" target="_blank" rel="noopener">http://a334713698.github.io</a> （将a334713698换成自己的用户名）也能看到博客的主页。</p>
<h3 id="添加ssh-key到Github"><a href="#添加ssh-key到Github" class="headerlink" title="添加ssh key到Github"></a>添加ssh key到Github</h3><h4 id="检查SSH-keys是否存在Github"><a href="#检查SSH-keys是否存在Github" class="headerlink" title="检查SSH keys是否存在Github"></a>检查SSH keys是否存在Github</h4><p>执行如下命令，检查SSH keys是否存在。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ls -al ~/.ssh</span><br></pre></td></tr></table></figure></p>
<p>如果有文件<code>id_rsa.pub</code> 或 <code>id_dsa.pub</code>，则直接进入<code>将SSH key添加到Github中</code>的步骤，否则进入下一步生成SSH key。</p>
<h4 id="生成新的ssh-key"><a href="#生成新的ssh-key" class="headerlink" title="生成新的ssh key"></a>生成新的ssh key</h4><p>执行如下命令生成public/private rsa key pair，注意将your_email@example.com换成你自己注册Github的邮箱地址。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ssh-keygen -t rsa -C "your_email@example.com"</span><br></pre></td></tr></table></figure></p>
<p>默认会在相应路径下（~/.ssh/id_rsa.pub）生成id_rsa和id_rsa.pub两个文件。</p>
<h4 id="将ssh-key添加到Github中"><a href="#将ssh-key添加到Github中" class="headerlink" title="将ssh key添加到Github中"></a>将ssh key添加到Github中</h4><p>Finder（访达）前往<code>~/.ssh/id_rsa.pub</code>打开id_rsa.pub文件，里面的信息即为SSH key，将这些信息复制到Github的Add SSH key页面即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">进入Github –&gt; Settings –&gt; SSH and GPG keys –&gt; add SSH key</span><br></pre></td></tr></table></figure></p>
<p>Title任意填（也可不填，我就没填），粘贴内容要从头部的<code>ssh-rsa</code>开始粘，将复制的内容粘贴到Key里，点击下方<code>Add key</code>完成设置。</p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>到这里，建站工作基本搞定。接下去，就可以发布文章，更换主题了。<br>本文大部分内容都参考于<a href="http://gonghonglou.com/" target="_blank" rel="noopener">与佳期的个人博客</a> 的 <a href="http://gonghonglou.com/2016/02/03/firstblog/" target="_blank" rel="noopener">《Mac上搭建基于GitHub的Hexo博客<br>述》</a>一文。文中还涉及文章发布，域名绑定，主题更换等内容，都非常有帮助。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/08/Mac上搭建基于GitHub的Hexo博客/" data-id="ckhnfj2xd001e5tbunldu6epx"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tech/">Tech</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-第一篇文章" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/02/07/第一篇文章/"
    >第一篇文章</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/02/07/第一篇文章/" class="article-date">
  <time datetime="2018-02-07T08:19:21.000Z" itemprop="datePublished">2018-02-07</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/随笔/">随笔</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>捯饬了两天，终于把博客弄起来了，随便写点儿什么吧..<br>通过看<a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo官网</a>的文档，初步了解了Hexo建站的方式和一些常用的命令行<br>另外参考了两名博主的文章，对本次建站都非常地有帮助，分别是：<a href="http://tengj.top/tags/hexo/" target="_blank" rel="noopener">嘟嘟独立博客</a>、<a href="http://gonghonglou.com/2016/02/03/firstblog/" target="_blank" rel="noopener">与佳期的个人博客</a><br>使用的theme来自Yilia (<a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="noopener">hexo-theme-yilia</a>)可直接点击括号里的链接，前往主题所存的Github页面  </p>
<p>2018年2月8日<br>更换主题：来自Wee(<a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank" rel="noopener">hexo-theme-archer</a>)  </p>
<p>创建博客的初衷：  </p>
<ul>
<li>博客的存在，能够表达自己的情感；</li>
<li>书写技术文章，督促自己对技术知识点的归纳、总结和理解；</li>
<li>自主建站，非常酷。这也是当初选择编程这项实业的原因。</li>
</ul>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/07/第一篇文章/" data-id="ckhnfj2xl001x5tbuavc7a97r"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Life/">Life</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2018-2020
        GG266
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s4.cnzz.com/z_stat.php?id=1278583018&amp;web_id=1278583018'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    
      <aside class="sidebar">
        
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/avatar.svg" alt="GG266的个人博客"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">



<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  
  

  </div>
</body>

</html>