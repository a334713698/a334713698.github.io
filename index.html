<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="description" content="iOS coder,Machine-learning,DJ Hong的个人博客" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     GG266的个人博客
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.jpg" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-2020年3月读书心得" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/03/2020年3月读书心得/"
    >2020年3月读书心得</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/04/03/2020年3月读书心得/" class="article-date">
  <time datetime="2020-04-03T06:28:14.000Z" itemprop="datePublished">2020-04-03</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/阅读/">阅读</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p><img src="https://tva1.sinaimg.cn/large/00831rSTly1gdgkfsmvgyj30u0146tpa.jpg" alt=""><br>都说三十而立，我明年也就三十了。我们这代人，多“大器晚成”，因为没有太多生活的压力，面对如今这丰富的物质世界，挣钱慢，花钱快。<br>已经不记得是从哪个途径获取到《富爸爸穷爸爸》这这本书。读完它并没有对我接下来的“致富”有多大帮助，但是从书中却可以看到很多作者提出的“穷人”因何而穷的原因，在自己身上都会被对应到。<br>读罢本书，给我最大的收获是，重新确立自己的财富观和消费观。接下去，将从几个点，描述一下我从书中所得到的一些感受。</p>
<h3 id="专注自己的事业-正确的消费观"><a href="#专注自己的事业-正确的消费观" class="headerlink" title="专注自己的事业/正确的消费观"></a>专注自己的事业/正确的消费观</h3><blockquote>
<p>大多数人会冲动地用贷款去买新车或其他奢侈品，他们可能对生活有些厌烦了，所以期待有点新玩意儿。用贷款买奢侈品，结果迟早会让人们放弃那些东西，因为借下的债是个沉重的负担。<br>在你花时间投资并创建自己的事业之后，就准备好迎接那个富人的最大秘密吧。这个秘密铺平了富人的致富之路。</p>
</blockquote>
<p>回顾自己的生活，是不是和作者描述的极其相似？我们像“穷爸爸”一样，日复一日地努力上班，为的是每个月那固定时间固定金额的工资，我们用他支付房租，支付每顿饭，甚至我们都拿不到全部的金额，因为我们还需要交税，女孩们或许还需要购买一些化妆品，男孩们想想应该买鞋了，这些都是日常生活里的“基本开销”。偶尔对生活和工作的“压力”有些不满，想要购买一些早就心仪已久的“奢侈品”（展开可以理解成价格不菲的电子产品或名牌包包），这是无可厚非的，平凡的日子里需要一些新鲜玩意儿刺激一下。但是，我们更多的支付方式是什么？望着手头本就不宽裕的现金，更可能会选择花呗、信用卡、甚至分期付款，动用未来的钱，让自己背上一个个负债。<br>而“富人”的选择是，现金的存是资产增值的保障，他们会使用现金去购买资产，通过资产去挣取收益，而通过收益的部分金额作为奖励全额购买“奢侈品”。<br>对此，我思考了以往的生活消费方式，对于一些金额“小高”的商品，我会选择存一小段时间的钱以后，全额购买；而对于金额“较高”，而我有基于想要的商品，毫无悬念地会选择分期付款的。<br>是时候对现有的消费观进行修正了，我们努力工作，是为了让生活变得更好，每个人都应该去“创业”，这并不是说让大家毅然决然地辞去现在还能有收入的工作，而投身去不稳定的创业中去，而是当今我们所说的“副业”，找一个自己喜欢的，擅长的，甚至是自己早就想干的事业，全身心地投入其中，努力让“副业”产生现金流。当“副业”有了一定规模，拥有了一定团队规模，它就能够成为我们的资产，而资产能够产生较为稳定的现金，是不是就离财务自由更进了一步。</p>
<h3 id="资产"><a href="#资产" class="headerlink" title="资产"></a>资产</h3><blockquote>
<p>资产就是能把钱放进你口袋里的东西＆负债是把钱从你口袋里取走的东西。</p>
<p>资产举例：<br>一、不需我到场就可以正常运作的业务<br>二、股票、基金、债券<br>三、产生收入的房地产<br>四、专利权和著作权<br>五、任何其它有价值、可产生收入或增值并且有很好的流通市场的东西<br>六、知识</p>
<p>负债举例：<br>一、维持生存：食、衣、住、行<br>二、健康问题：亚健康、医院、药物<br>三、休闲娱乐：出游、旅行、餐宴、活动<br>四、法令规定：税务、手续费、规费<br>五、额外开销：罚单、社交、补遗<br>六、资金借贷：贷款、信用卡、私人借款</p>
</blockquote>
<p>作者在书中反复强调应该增加资产，减少负债。因为资产能够增加现金流，也就是为我们挣钱。而尽量减少负债，能够让我们维持手中尽量过的资金，而资金可以用来投资（钱生钱）或储蓄（我认为一定量的储蓄是必要的）。同时，我们应该养成一个良好的习惯，那就是利用创造的收入去消费，特别是大额消费，而避免所以动用储蓄。</p>
<h3 id="风险与收益"><a href="#风险与收益" class="headerlink" title="风险与收益"></a>风险与收益</h3><blockquote>
<p>“保险”的投资尝尝过于安全，太安全则会导致低收益。</p>
</blockquote>
<p>高风险，高回报；低风险，低收益。<br>风险与收益成正比，是一个所有人都明白的道理。<br>将钱存在银行里，或者购买一些风险低收益稳定的基金，属于“低风险”的投资。<br>而创业、投资股票这类，我认为是”高风险“的投资。<br>我认为，每个人都值得为自己建立一份事业，这里的事业不是指上班的工作，而是实实在在的自己当”老板“，且不论规模大小，当这份事业有了一定的收入，那它就能成为我们的资产。<br>当然，高风险以为着失败后，所要承受的后果，也会比低风险的投资要大。所以，投入高风险投资前，需要具备尽量多的专业知识，避免采坑，将风险发生的可能性降低，同时还要有乐观迎接失败的心态。失败并不代表一无所获，可以收获经验，我们应该尽量早地去”试错“和”失败“，因为当我们还年轻的时候，我们有更高的抗风险能力，容错能力。</p>
<h3 id="试着付诸实践"><a href="#试着付诸实践" class="headerlink" title="试着付诸实践"></a>试着付诸实践</h3><blockquote>
<p>在周末研讨班学习”如何购买破产的房地产“时，我学会了一个模式，那就是试着付诸实践，而这一步正式许多人没能做到的。</p>
</blockquote>
<p>学到的知识，如果不去实践，那就永远不会成为自己的能力。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>《富爸爸穷爸爸》这本书给我的最大帮助是确立正确的消费观——不要用储蓄去支付”奢侈品“，而是应该通过学习专业知识，用以购买或获取良性资产，降低风险，让资产为自己工作。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/03/2020年3月读书心得/" data-id="ck8jtbs6x0001v1bu7xrdxeu4"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读书心得/">读书心得</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-LeetCode算法学习日记（2020年3月）" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/24/LeetCode算法学习日记（2020年3月）/"
    >LeetCode算法学习日记（2020年3月）</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/24/LeetCode算法学习日记（2020年3月）/" class="article-date">
  <time datetime="2020-03-24T07:55:37.000Z" itemprop="datePublished">2020-03-24</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/算法/">算法</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="2020-3-23"><a href="#2020-3-23" class="headerlink" title="2020.3.23"></a>2020.3.23</h3><hr>
<p><b>题目：</b>求两数的最大公约数<br><b>知识点：</b>辗转相除法（欧几里得算法）<br><b>代码：</b><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">getGreatestCommonDivisor</span><span class="params">(x : Int, y : Int)</span></span> -&gt; <span class="type">Int</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> preDivisor = <span class="built_in">max</span>(x, y)</span><br><span class="line">        <span class="keyword">var</span> <span class="type">Divisor</span> = <span class="built_in">min</span>(x, y)</span><br><span class="line">        <span class="keyword">repeat</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="type">Remainder</span> = preDivisor%<span class="type">Divisor</span></span><br><span class="line">            <span class="keyword">if</span> <span class="type">Remainder</span> == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            preDivisor = <span class="type">Divisor</span></span><br><span class="line">            <span class="type">Divisor</span> = <span class="type">Remainder</span></span><br><span class="line">        &#125;<span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="type">Divisor</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><b>算法理解：</b><br>假设x &gt; y，则有x = k·y + r（x，y，k，r都为正整数，且r≥0）<br>当r = 0，y为(x, y)<br>当r &gt; 0，r = x%y = x - k·y<br>假设d为(x, y)的公约数，记做 <code>d|x</code>（x能够被d整除）和 <code>d|y</code>（y能够被d整除）<br>则以上等式可以写成r/d = x/d - k·y/d，而等式的右边一定是正整数，所以r也能被d整除，即记做 <code>d|r</code><br>所以x, y, x%y具有相同的公约数集<br>同理可得x_0 = y, y_0 = x%y, r_0 = x_0 % y_0 = y%(x%y)具有相同的公约数集，并以此类推<br>当首次出现x_n%y_n = 0时，即为(x, y)的最大公约数</p>
<h3 id="2020-3-24"><a href="#2020-3-24" class="headerlink" title="2020.3.24"></a>2020.3.24</h3><hr>
<p><b>题目：</b>【水壶问题】有两个容量分别为 x升 和 y升 的水壶以及无限多的水。请判断能否通过使用这两个水壶，从而可以得到恰好 z升 的水？<br>如果可以，最后请用以上水壶中的一或两个来盛放取得的 z升 水。<br>允许操作：<br><b>·</b> 装满任意一个水壶<br><b>·</b> 清空任意一个水壶<br><b>·</b> 从一个水壶向另外一个水壶倒水，直到装满或者倒空<br><b>知识点：</b>裴蜀定理（贝祖定理）<br><b>代码：</b><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">gcd</span><span class="params">(<span class="number">_</span> x : Int,<span class="number">_</span> y : Int)</span></span> -&gt; <span class="type">Int</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> preDivisor = <span class="built_in">max</span>(x, y)</span><br><span class="line">        <span class="keyword">let</span> <span class="type">Divisor</span> = <span class="built_in">min</span>(x, y)</span><br><span class="line">        <span class="keyword">if</span> preDivisor % <span class="type">Divisor</span> == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Divisor</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> gcd(x: <span class="type">Divisor</span>, y: preDivisor % <span class="type">Divisor</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">canMeasureWater</span><span class="params">(<span class="number">_</span> x: Int, <span class="number">_</span> y: Int, <span class="number">_</span> z: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> z &gt; x+y&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> x==<span class="number">0</span> || y==<span class="number">0</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (z==<span class="number">0</span>) || (x+y==z)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> z % gcd(x, y) == <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><b>算法理解：</b><br>由题可知，在z ≤ x+y，且x, y都不为0的情况下，两个水壶总水量的增加或减少，一定有至少一个壶是满的或是空的，不存在同时有水且都不满的情况。<br>当有一个水壶不满时，往不满的水壶里加满水，或是将水壶倒空，都是没有意义的，<br>所以，每次变动的 <code>总水量</code> 一定是 x 和 y 的变化量。<br>此时题目可以理解为 <code>总水量</code> 经过a次 x升，b次 y升 的变化，能否最终得到 z升？<br>也就获得了等式：</p>
<center>ax + by = z</center>

<p>而只要满足 z ≤ x+y，且这样的 a, b 存在，那么目标就可以达成。<br>根据 <a href="https://baike.baidu.com/item/%E8%A3%B4%E8%9C%80%E5%AE%9A%E7%90%86/5186593" target="_blank" rel="noopener">裴蜀定理(贝祖定理)</a>，ax+by = z 有解的充要条件是：当且仅当 z 是 (x, y) 最大的公约数的倍数。<br>因此我们只需要找到 (x, y) 的最大公约数并判断 z 是否是它的倍数即可。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/03/24/LeetCode算法学习日记（2020年3月）/" data-id="ck8jtbs7d000dv1budtakzy8s"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/">LeetCode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-2019年总结" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/04/2019年总结/"
    >2019年总结</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/04/2019年总结/" class="article-date">
  <time datetime="2020-02-04T08:25:07.000Z" itemprop="datePublished">2020-02-04</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/年终总结/">年终总结</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>2019是个忙碌的一年，公司的产品在市场的打磨下不断完善和优化，逐步走向正规，在开发之余还承担下了出差提供技术支持的工作，多少算是为久坐敲代码的状态，提供了外出运动的机会。<br>这一年的内容很丰富，但也有不足，话不多说，我来总结一下全年都做了什么。</p>
<h2 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h2><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gbkcg9544kj317c0akdgu.jpg" alt=""></p>
<p>GitHub上大部分contribution都来自我独立开发的一款App——五迷——专为五月天歌迷群体所开发的App，目前累计用户450+，因为我本身也是一为“暴民”（五月天粉丝的一种称呼）。所以这个App就应运而生了。其中的小工具都是较为实用的，为五迷群体定制的一些功能，我希望在未来还能继续优化和完善这个App，让它能够活跃起来，这也算是一种情怀吧。</p>
<p>如果有兴趣，可以点击<a href="https://apps.apple.com/cn/app/id1461781133" target="_blank" rel="noopener">下载</a>跳转至App store进行安装。</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gbkcyl9x2bj30sg0wd7g4.jpg" alt=""></p>
<h2 id="技术"><a href="#技术" class="headerlink" title="技术"></a>技术</h2><p>2019年尝试了一些比较有趣的新技术，例如为App添加shortcut，通过Siri快速唤醒App及某项功能，同时通过阅读一些watchOS开发相关的文章，为Pigo番茄钟开发watchOS版本，个人认为番茄钟这类App注重效率，实际上最适合的平台应该是抬手即见的手表，或者是正在工作的设备上，例如手头的电脑，而不是需要解锁界面的手机。</p>
<p>苹果公司在2019年的WWDC上推出了macOS Catalyst功能，能够将iPad app快速地转化成桌面应用，我十分期待，并想尝试将移动版的Pigo转换成桌面应用。</p>
<h2 id="阅读"><a href="#阅读" class="headerlink" title="阅读"></a>阅读</h2><p>2019年8月正儿八经地读一本书——《美国陷阱》，阅读的时间比较耐人寻味，这里不做解释。针对书的内容，已记录在<a href="httpshttp://blog.gg266.tech/2019/08/26/2019%E5%B9%B48%E6%9C%88%E8%AF%BB%E4%B9%A6%E5%BF%83%E5%BE%97/" target="_blank" rel="noopener">《2019年8月读书心得》</a>，这里也不做赘述。在这里想要分享的是对于电子书和实体书的阅读感受，我个人原本比较偏爱纸质书，因为纸质书有读书最“原始”的质感，是一种纯粹的读书感觉。不过这本书的40%我是在纸质书上阅读的，因为恰逢出差，需要在不同的地方来回穿梭，便下载了微信读书，完成了剩下60%的阅读。线上读书有很多好处，能够随时标记，发表自己的观点，同时查看和点评其他网友的见解，十分有趣，同时携带方便这一点就不用多说了。微信读书还能将微信公众号的阅读内容同步进来，这一点是十分惊喜的，这样可以相对统一地管理阅读内容，让微信成为更纯粹的社交聊天软件。</p>
<h2 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h2><p>2019.2.14 从此以后不仅仅是情人节，还是我和老婆77M的结婚纪念日，一路走来，有欢笑也不乏争吵，时间的沉淀让我们发现自己便是对方的Mr/Miss Right，往后余生无论平淡荣华，都是你。</p>
<p>同年10月，我们还迎来我们的天使小宝宝，他像极了他美丽的麻麻，他的每个微笑和啼哭，都牵动着我们，期待小家伙在我们的陪伴下健康、快乐地长大。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>在2019年，工作还算兢兢业业，通过阅读扩展见识，通过尝试新技术拓宽知识广度，同时在生活上由于身份的转变，让自己更加成熟。</p>
<p>2019，忙碌、充实，但缺章法。</p>
<p>2020，需要更加完善的时间和计划管理，不能让任务躺在清单里被忘记。新的一年，拭目以待。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/04/2019年总结/" data-id="ck8jtbs750006v1bu0vp3d0gy"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随记/">随记</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-Github项目迁移" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/01/17/Github项目迁移/"
    >Github项目迁移</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/01/17/Github项目迁移/" class="article-date">
  <time datetime="2020-01-17T07:20:09.000Z" itemprop="datePublished">2020-01-17</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Git/">Git</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>最早用QQ号作为GitHub的登录名，感觉有点low，想着重新注册一个账号，把所有项目迁移过来，找了一些网上的资料，最后在《<a href="https://dev.tencent.com/help/git-import-tencentcloud" target="_blank" rel="noopener">如何将Git仓库导入腾讯云开发者平台？</a>》上找到了解决方案。<br>我是把项目从 GitHubUserOld 迁移到 GitHubUserNew 上的。不同平台的账户，操作方式相同。<br>具体操作如下：</p>
<h3 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h3><p>首先在GitHubUserNew账号下，新建一个同名的空项目，不选择 <code>启用 README.md 文件初始化项目</code> ，以及任何 <code>License</code> 和 <code>.gitignore</code> 文件。</p>
<h3 id="克隆项目"><a href="#克隆项目" class="headerlink" title="克隆项目"></a>克隆项目</h3><p>从 GitHubUserOld 中找到需要迁移的项目，复制出项目的web URL。</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gazlxcx88jj31di0u048s.jpg" alt=""></p>
<p>确定当前路径所在，我这里是 cd 到桌面，到时候直接克隆到桌面。<br>在<code>Terminal</code>执行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/GitHubUserOld/repo.git --bare</span><br></pre></td></tr></table></figure>
<p>操作结束后，桌面上会多出一个 <code>repo.git</code> 文件夹</p>
<h3 id="将克隆的仓库推送给新账户"><a href="#将克隆的仓库推送给新账户" class="headerlink" title="将克隆的仓库推送给新账户"></a>将克隆的仓库推送给新账户</h3><p>cd到 <code>repo.git</code> 文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd repo.git</span><br></pre></td></tr></table></figure>
<p>并 <code>push</code> 所有的分支和对象到新账户的仓库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push https://github.com/GitHubUserNew/repo.git --all</span><br></pre></td></tr></table></figure>
<p>完成后，再执行推送所有的标签。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push https://github.com/GitHubUserNew/repo.git --tags</span><br></pre></td></tr></table></figure>
<p>到此，GitHubUserOld账号下的repo就被完美地迁移到了GitHubUserNew账户下。</p>
<h3 id="克隆速度过慢问题"><a href="#克隆速度过慢问题" class="headerlink" title="克隆速度过慢问题"></a>克隆速度过慢问题</h3><p>我的某个项目达到了 <code>450M</code> 的大小，执行克隆操作的时候网速只有 <code>20k/s</code> 。如何解决克隆仓库时，网络过慢的问题呢。</p>
<p>答案是，修改hosts，添加固定的DNS解析。</p>
<h4 id="MacOS系统下的操作方式："><a href="#MacOS系统下的操作方式：" class="headerlink" title="MacOS系统下的操作方式："></a>MacOS系统下的操作方式：</h4><p>1.打开 <code>/etc/hosts</code> ，拷贝出该 <code>hosts</code> 文件；</p>
<p>2.将下列内容加入到拷贝出的 <code>hosts</code> 文件的末尾</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gazn258bapj30n80dodl3.jpg" alt=""></p>
<p>3.用拷贝出的文件替换 <code>hosts</code> 文件；</p>
<p>4.刷新DNS缓存：sudo dscacheutil -flushcache</p>
<p>参考文献：<a href="https://www.jianshu.com/p/2c18c13fbef3" target="_blank" rel="noopener">https://www.jianshu.com/p/2c18c13fbef3</a></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/01/17/Github项目迁移/" data-id="ck8jtbs760007v1bugg9n6ch5"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-2019年8月读书心得" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/08/26/2019年8月读书心得/"
    >2019年8月读书心得</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/08/26/2019年8月读书心得/" class="article-date">
  <time datetime="2019-08-26T08:02:45.000Z" itemprop="datePublished">2019-08-26</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/阅读/">阅读</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>距离上一次读书大约有2年了吧~那会儿花了一个月的时间读完了挺厚的两本《基督山伯爵》。阅读给人带来的最直接的好处是，可以让心静下来，遇事莫急，先过过脑，思考思考，在做决策。</p>
<p>由于种种原因吧。重新拾起阅读这个习惯选择的第一本书，是来自华为CEO任正非先生桌头的《美国陷阱》</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6d5ws7xy7j30eg0gwzl8.jpg" alt=""><br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6d5wrth9jj30e90elab0.jpg" alt=""></p>
<p>本书以作者弗雷德里克·皮耶鲁齐的亲身经历为依据，描述了美国利用其强大的国力“强制”实时其“长臂管辖”能力以实现其自身目的。</p>
<p>从书中的描写，我们可以看出，作者是这场隐蔽的经济战争的牺牲品、替罪羊。在他入狱之后，先后被自己的公司（法国阿尔斯通）所出卖，被自己的国家所遗忘。公司里的高管，人人只管着自保，而作者的祖国——法国，在政治上也没有任何可以谈判的筹码，只能忍气吞声。最终，阿尔斯通的CEO柏克龙以公司为筹码换取自身平安，将法国的“明珠”产业——阿尔斯通的电力产业，卖给了美国通用电气公司。</p>
<p>他们是如何做到的呢？</p>
<p>美国政府自认为有权追诉任何一家公司，只要它用美元计价签订合同，或者仅仅通过设在美国的服务器（如谷歌邮箱或微软邮箱）收发、存储（甚至只是过境）邮件，这些都被视为国际贸易工具。这就是美国人的一个把戏，他们把一项可能削弱自身企业的法律转变为干涉他国企业、发动经济战的神奇工具。<br>而到手的“罪犯”不需要是真正的幕后主使，只要美国政府愿意，那他就是。只要能达到他们的狼子野心，就可以了。</p>
<p>看完这本书，我又去查阅了“孟晚舟事件”，结果和我想的一样，这是美国故技重施的阴谋，想要通过相同的手法，对在通信领域有着举足轻重地位的中国公司“华为”入手。<br>略有不同的是，我们国家对此事高度关注，华为公司也在积极应对。</p>
<p>说到这里，忍不住想提一下中美的贸易战。作为一名普通老百姓，可能对贸易战的直观感受就是…没啥感觉，成天看新闻说贸易战，然后各种东西的涨价不知道和贸易战是否有关。不管我们相不相信，愿不愿意，这场经济战争，都已经打响了。我觉得我所能做的，就是相信我们的国家，能够在这场战斗中展现出我们的优势和强大国力。这里有一篇<br><a href="https://media.weibo.cn/article?id=2309404404008738488342" target="_blank" rel="noopener">《2019年8月中美贸易战简况总结》</a>，个人觉得还是非常值得一读的。我们承认美国拥有世界上首屈一指的国力，但是如今的中国在世界上，也是有着举足轻重的力量。</p>
<p>最后提一下。</p>
<p>《美国陷阱》这本书的前29节，我看的是实体书。我并没有购买这本书。而是在支付宝的“浙江图书馆”借阅了这本书。并且它支持邮寄（邮政+京东），到手速度非常快。<br>而后面的章节，由于出差没有带书。在某读书软件中读完了剩余的内容。感觉电子书阅读，其实也是蛮能接受的，方便随时阅读，就是看久了屏幕，眼睛有点吃力。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/26/2019年8月读书心得/" data-id="ck8jtbs710003v1buvu1m03b3"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读书心得/">读书心得</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-iOS源码阅读——YYWebImage" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/12/25/iOS源码阅读——YYWebImage/"
    >iOS源码阅读——YYWebImage</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/12/25/iOS源码阅读——YYWebImage/" class="article-date">
  <time datetime="2018-12-25T12:07:29.000Z" itemprop="datePublished">2018-12-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>加载网络图片是项目中比较常见的需求，<code>YYWebImage</code>是Github中比较好用的图片加载开源框架之一。<code>YYWebImage</code>是作者为UIImageView创建的Category，使得UIImageView的实例能够直接调用一个实例方法，就能获取网络图片的功能。</p>
<h2 id="UIImageView-YYWebImage的实例方法"><a href="#UIImageView-YYWebImage的实例方法" class="headerlink" title="UIImageView+YYWebImage的实例方法"></a>UIImageView+YYWebImage的实例方法</h2><p>在<code>UIImageView+YYWebImage</code>列举了5中方法供开发者使用，分别是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">①- (void)yy_setImageWithURL:(nullable NSURL *)imageURL placeholder:(nullable UIImage *)placeholder;</span><br><span class="line">②- (void)yy_setImageWithURL:(nullable NSURL *)imageURL options:(YYWebImageOptions)options;</span><br><span class="line">③- (void)yy_setImageWithURL:(nullable NSURL *)imageURL</span><br><span class="line">               placeholder:(nullable UIImage *)placeholder</span><br><span class="line">                   options:(YYWebImageOptions)options</span><br><span class="line">                completion:(nullable YYWebImageCompletionBlock)completion;</span><br><span class="line">④- (void)yy_setImageWithURL:(nullable NSURL *)imageURL</span><br><span class="line">               placeholder:(nullable UIImage *)placeholder</span><br><span class="line">                   options:(YYWebImageOptions)options</span><br><span class="line">                  progress:(nullable YYWebImageProgressBlock)progress</span><br><span class="line">                 transform:(nullable YYWebImageTransformBlock)transform</span><br><span class="line">                completion:(nullable YYWebImageCompletionBlock)completion;</span><br><span class="line"></span><br><span class="line">⑤- (void)yy_setHighlightedImageWithURL:(NSURL *)imageURL</span><br><span class="line">                          placeholder:(UIImage *)placeholder</span><br><span class="line">                              options:(YYWebImageOptions)options</span><br><span class="line">                              manager:(YYWebImageManager *)manager</span><br><span class="line">                             progress:(YYWebImageProgressBlock)progress</span><br><span class="line">                            transform:(YYWebImageTransformBlock)transform</span><br><span class="line">                           completion:(YYWebImageCompletionBlock)completion;</span><br></pre></td></tr></table></figure></p>
<p>从方法的具体实现中可以看到，①~④的方法实现，都是调用了方法⑤，只是参数传递有所不同。所以我们只需要着重阅读方法⑤的代码实现</p>
<h2 id="具体实现——UIImageView-YYWebImage-m"><a href="#具体实现——UIImageView-YYWebImage-m" class="headerlink" title="具体实现——UIImageView+YYWebImage.m"></a>具体实现——<a href="https://github.com/ibireme/YYWebImage/blob/master/YYWebImage/Categories/UIImageView%2BYYWebImage.m" target="_blank" rel="noopener">UIImageView+YYWebImage.m</a></h2><ol>
<li>判断传入的图片链接如果是NSString类型的实例，要先转换为NSURL类型的实例</li>
<li>三目运算，判断<code>YYWebImageManager</code>实例初始化与否，确保初始化完成</li>
<li><p>_YYWebImageSetter</p>
<ol>
<li>关于<code>_YYWebImageSetter</code>，作者的注解是：Private class used by web image categories.Typically, you should not use this class directly.它是Web图像类别使用的私有类。通常，您不应直接使用此类。</li>
<li>包含2个只读属性、和4个方法<ol>
<li>属性：（NSURL*）imageURL、(int32_t) sentinel</li>
<li>方法：<ol>
<li>-(int32_t)setOperationWithSentinel: url: options: manager: progress: transform: completion:</li>
<li>-(int32_t)cancel</li>
<li>-(int32_t)cancelWithNewURL:</li>
<li>+(dispatch_queue_t)setterQueue</li>
</ol>
</li>
<li><code>objc_getAssociatedObject</code>：通过runtime获取UIImageView的动态属性setter，类型为<code>_YYWebImageSetter</code>。</li>
<li>如果获取到的setter为空，则需要新建一个_YYWebImageSetter实例，并动态关联这个属性。</li>
<li>[setter cancelWithNewURL:imageURL]通过新的图片链接，取消原来的线程操作。实现步骤：<ol>
<li>dispatch_semaphore_wait(_lock, DISPATCH_TIME_FOREVER)如果_lock的信号量值为0，则线程阻塞，不往下执行。否则，信号量-1（初始信号量为1），继续往下执行。</li>
<li>判断 _operation线程是否存在，如果存在，取消这个线程，并置空。</li>
<li>为 _imageURL变量赋值——新的图片连接</li>
<li>sentinel = OSAtomicIncrement32(&amp;_sentinel);值自增</li>
<li>dispatch_semaphore_signal(_lock) 信号量+1</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li><p>_yy_dispatch_sync_on_main_queue确保在主线程执行后面的代码。</p>
<ol>
<li>从内存缓存<code>YYImageCacheTypeMemory</code>中获取图片，如果获取成功，则执行complete()，结束操作。</li>
<li>未在内存缓存中获取到图片，继续执行。<ol>
<li>通过 [_YYWebImageSetter setterQueue]，获取到一个与全局队列优先级相同的队列，并异步执行后面的代码</li>
<li>预先创建和实现的  YYWebImageCompletionBlock _completion block。</li>
<li>实现 _YYWebImageSetter *setter的实例方法—— [setter setOperationWithSentinel:sentinel url:imageURL options:options manager:manager progress:_progress transform:transform completion:_completion]。</li>
<li>通过一路追随 _completion block的传递，发现进入了  YYWebImageOperation  类。</li>
<li>YYWebImageOperation继承于 NSOperation。作者重写了NSOpration类的start，方法。并在恰当时机调用了自定义方法 _startOperation。</li>
<li>_startOperation方法的实现<ol>
<li>当_cache存在且用户没有设置  YYWebImageOptionUseNSURLCache 和  YYWebImageOptionRefreshImageCache 选项。会先去取图片缓存。</li>
<li>获取内存图片缓存，调用方法 [_cache getImageForKey:_cacheKey withType:YYImageCacheTypeMemory];。通过_cacheKey获取内存缓存。如果获取成功，结束后台线程；获取失败，则向下执行</li>
<li>当用户没有设置忽略磁盘缓存 YYWebImageOptionIgnoreDiskCache，则接下去，从磁盘获取图片缓存。</li>
<li>获取磁盘图片缓存，调用方法 [self.cache getImageForKey:self.cacheKey withType:YYImageCacheTypeDisk]。<ol>
<li>如果从磁盘获取图片缓存成功，先将图片缓存到内存，并调用 _didReceiveImageFromDiskCache方法。</li>
<li>如果同磁盘获取图片缓存失败，则需要从网络请求图片数据。</li>
</ol>
</li>
<li>通过网络请求获取图片。<ol>
<li>通过 incrementNetworkActivityCount为请求数量+1</li>
<li>通过 connection: didReceiveData: 方法的回调，不断地获取数据。</li>
<li>在 connectionDidFinishLoading 的方法回调中，调用 _didReceiveImageFromWeb 方法。</li>
<li>通过 decrementNetworkActivityCount 为请求数量-1</li>
</ol>
</li>
<li><ol>
<li>_didReceiveImageFromWeb成功从网络获取图片。将图片分别存入内存和磁盘缓存中。</li>
</ol>
</li>
<li>回到之前实现的 _completion代码块。主要是一些动画特效。</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>通过<code>completion:(nullable YYWebImageCompletionBlock)completion</code>，将结果返回给开发者</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>YYWebImage</code>的实现合乎我们的直觉：</p>
<ul>
<li>查看缓存（1.内存；2.磁盘）<ul>
<li>缓存命中<ul>
<li>返回图片</li>
<li>更新视图</li>
</ul>
</li>
<li>缓存未命中<ul>
<li>异步下载图片</li>
<li>加入缓存</li>
<li>更新视图</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h3><p>之前尝试阅读过<code>YYWebImage</code>框架，当时的方法是一个类一个类看，从.h的属性、方法，到.m的具体实现。说实话，看起来着实有点烧脑和低效。读了<a href="https://github.com/draveness/analyze" target="_blank" rel="noopener">Draven</a>的《<a href="https://github.com/draveness/analyze/blob/master/contents/SDWebImage/iOS%20%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90%20---%20SDWebImage.md" target="_blank" rel="noopener">iOS 源代码分析 — SDWebImage</a>》，有所启发，直接以API作为入口阅读源码，更具方向性，才会更有收获。<br>文章中涉及到了<a href="https://www.cnblogs.com/snailHL/p/3906112.html" target="_blank" rel="noopener">dispatch_semaphore</a>、<a href="https://www.jianshu.com/p/8f07a9bdd1cd" target="_blank" rel="noopener">队列优先级</a>的知识。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/25/iOS源码阅读——YYWebImage/" data-id="ck8jtbs7o000vv1buv1zmdqsn"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/YYWebImage/">YYWebImage</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/源码阅读/">源码阅读</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-iOS-UITableView-长按移动Cell的位置" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/11/30/iOS-UITableView-长按移动Cell的位置/"
    >iOS UITableView 长按移动Cell的位置</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/11/30/iOS-UITableView-长按移动Cell的位置/" class="article-date">
  <time datetime="2018-11-30T11:49:23.000Z" itemprop="datePublished">2018-11-30</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="实现思路："><a href="#实现思路：" class="headerlink" title="实现思路："></a>实现思路：</h3><ol>
<li>长按获取当前手指所在位置的indexPath</li>
<li>通过indexPath获取对应cell，并生成快照</li>
<li>移动。<br>3.1. 快照跟随手指移动<br>3.2. 当手指移动到其他cell的位置时，执行位置互换，和数据互换</li>
<li>放开手指，移除快照</li>
</ol>
<p><br></p>
<h3 id="实现步骤："><a href="#实现步骤：" class="headerlink" title="实现步骤："></a>实现步骤：</h3><p>准备：(UITableView<em>)tableView，数据源(NSMutableArray</em>)lists</p>
<h5 id="第一步：为tableView添加长按手势"><a href="#第一步：为tableView添加长按手势" class="headerlink" title="第一步：为tableView添加长按手势"></a>第一步：为tableView添加长按手势</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UILongPressGestureRecognizer* longRec = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];</span><br><span class="line">[_tableView addGestureRecognizer:longRec];</span><br></pre></td></tr></table></figure>
<h5 id="第二步：实现手势对应的操作。"><a href="#第二步：实现手势对应的操作。" class="headerlink" title="第二步：实现手势对应的操作。"></a>第二步：实现手势对应的操作。</h5><p>① <code>UIGestureRecognizerStateBegan</code> 时，选中cell。<br>通过手势在tableView的location，可以获取到tableView上对应的IndexPath，从而也能获取到对应的cell。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//UIGestureRecognizer 的实例方法，可获取手势在载体上的点坐标</span><br><span class="line">- (CGPoint)locationInView:(nullable UIView*)view;</span><br><span class="line"></span><br><span class="line">//UITableView 的实例方法，可获取屏幕上某个点下存在的indexPath</span><br><span class="line">- (nullable NSIndexPath *)indexPathForRowAtPoint:(CGPoint)point;</span><br><span class="line"></span><br><span class="line">//UIView 的实例方法，可生成屏幕快照，要求iOS 7.0+</span><br><span class="line">- (nullable UIView *)snapshotViewAfterScreenUpdates:(BOOL)afterUpdates;</span><br></pre></td></tr></table></figure></p>
<p>② <code>UIGestureRecognizerStateChanged</code> 时，移动cell。<br>通过手势在移动中，不断的回调，获取相应的位置，当手势移动到其他cell的位置时，就可以进行数据和视图的对调。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//NSMutableArray 的实例方法，可快速交换数组中两个对象的位置</span><br><span class="line">- (void)exchangeObjectAtIndex:(NSUInteger)idx1 withObjectAtIndex:(NSUInteger)idx2;</span><br><span class="line"></span><br><span class="line">//UITableView 的实例方法，可快速交换两个cell的位置，带动画</span><br><span class="line">- (void)moveRowAtIndexPath:(NSIndexPath *)indexPath toIndexPath:(NSIndexPath *)newIndexPath;</span><br><span class="line"></span><br><span class="line">//UITableView 的实例方法，可快速交换两个section的位置，带动画</span><br><span class="line">- (void)moveSection:(NSInteger)section toSection:(NSInteger)newSection;</span><br></pre></td></tr></table></figure></p>
<p>③ <code>UIGestureRecognizerStateEnded</code> 时：放下cell，移除快照</p>
<p><br></p>
<p>完整的<code>longPress:</code>方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">- (void)longPress:(UILongPressGestureRecognizer*)sender&#123;</span><br><span class="line">    UIGestureRecognizerState state = sender.state;</span><br><span class="line">    CGPoint location = [sender locationInView:_tableView];</span><br><span class="line">    switch (state) &#123;</span><br><span class="line">        case UIGestureRecognizerStateBegan:&#123;</span><br><span class="line">            NSLog(@&quot;选中cell&quot;);</span><br><span class="line">            _selectIndexPath = [_tableView indexPathForRowAtPoint:location];</span><br><span class="line">            if (!_selectIndexPath) return;</span><br><span class="line">            UITableViewCell* cell = [_tableView cellForRowAtIndexPath:_selectIndexPath];</span><br><span class="line">            _snapShot = [self snapshotViewAfterScreenUpdates:cell];</span><br><span class="line">            _snapShot.frame = CGRectMake(0, location.y, _snapShot.bounds.size.width, _snapShot.bounds.size.height);</span><br><span class="line">            [self.view addSubview:_snapShot];</span><br><span class="line">            cell.contentView.hidden = YES;</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case UIGestureRecognizerStateChanged:&#123;</span><br><span class="line">            NSLog(@&quot;移动cell&quot;);</span><br><span class="line">            _snapShot.frame = CGRectMake(0, location.y, _snapShot.bounds.size.width, _snapShot.bounds.size.height);</span><br><span class="line">            NSIndexPath* changeIndexPath = [_tableView indexPathForRowAtPoint:location];</span><br><span class="line">            if (!_selectIndexPath || !changeIndexPath) return;</span><br><span class="line">            if (_selectIndexPath != changeIndexPath) &#123;</span><br><span class="line">                NSLog(@&quot;交换&quot;);</span><br><span class="line">                [self.lists exchangeObjectAtIndex:_selectIndexPath.row withObjectAtIndex:changeIndexPath.row];</span><br><span class="line">                //移动Section —— [self.tableView moveSection:0 toSection:0];</span><br><span class="line">                //移动row</span><br><span class="line">                [self.tableView moveRowAtIndexPath:_selectIndexPath toIndexPath:changeIndexPath];</span><br><span class="line">                UITableViewCell* selectCell = [_tableView cellForRowAtIndexPath:_selectIndexPath];</span><br><span class="line">                UITableViewCell* changeCell = [_tableView cellForRowAtIndexPath:changeIndexPath];</span><br><span class="line">                selectCell.contentView.hidden = NO;</span><br><span class="line">                changeCell.contentView.hidden = YES;</span><br><span class="line">                _selectIndexPath = changeIndexPath;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case UIGestureRecognizerStateEnded:&#123;</span><br><span class="line">            NSLog(@&quot;放下cell&quot;);</span><br><span class="line">            [_snapShot removeFromSuperview];</span><br><span class="line">            _snapShot = nil;</span><br><span class="line">            if (!_selectIndexPath) return;</span><br><span class="line">            UITableViewCell* cell = [_tableView cellForRowAtIndexPath:_selectIndexPath];</span><br><span class="line">            cell.contentView.hidden = NO;</span><br><span class="line">            _selectIndexPath = nil;</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://github.com/a334713698/DragSort" target="_blank" rel="noopener">Demo</a></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/30/iOS-UITableView-长按移动Cell的位置/" data-id="ck8jtbs7l000pv1bu7nyn977d"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UITableView/">UITableView</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-自定义UITableView左滑删除样式" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/09/07/自定义UITableView左滑删除样式/"
    >自定义UITableView左滑删除样式</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/09/07/自定义UITableView左滑删除样式/" class="article-date">
  <time datetime="2018-09-07T08:57:59.000Z" itemprop="datePublished">2018-09-07</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>最近在做番茄钟的项目，其中涉及到任务列表的界面，希望实现左滑删除的功能。UITableViewDelegate自带简单的左滑删除的接口，通过实现<code>canEditRowAtIndexPath方法</code>打开tableView可编辑的开关，再实现<code>editActionsForRowAtIndexPath方法</code>处理事件，<code>UITableViewRowAction</code>的实例允许修改文字和背景色。<br><img src="https://ws1.sinaimg.cn/large/0069RVTdgy1fv11c5vl0gj30lu05cdj5.jpg" alt=""></p>
<p>而我的需求是想把删除键做成一个垃圾桶图标。而系统没有直接可用的API，那就只能曲线救国了。</p>
<p>首先，这个删除按钮在 iOS11 和 iOS11以下的系统中，所处的父级是不一样的。</p>
<h2 id="在iOS11以前"><a href="#在iOS11以前" class="headerlink" title="在iOS11以前"></a>在iOS11以前</h2><p>删除按钮的父级是cell图。<br><img src="https://ws2.sinaimg.cn/large/0069RVTdgy1fv11nwlk64j319g0lc7fn.jpg" alt=""></p>
<h2 id="iOS11"><a href="#iOS11" class="headerlink" title="iOS11+"></a>iOS11+</h2><p>删除按钮的父级类名为<code>UISwipeActionPullView</code>，<code>UISwipeActionPullView</code>的父级为<code>UITableViewRowAction</code>，也就是说<code>UISwipeActionPullView</code>和cell是同级的。<br><img src="https://ws3.sinaimg.cn/large/0069RVTdgy1fv11nwb7dpj31ae0jkds6.jpg" alt=""></p>
<p>所以，两者需要以不同的方式实现。</p>
<p>在两种系统中，当还未左滑调出删除按钮时，输出cell或tableView的所有子视图，发现并没有删除按钮的存在。也就是说，他们是在需要的时候，被创建出来的。所以，我们需要重写某个方法去截获这个删除按钮。</p>
<h2 id="在iOS11以前-1"><a href="#在iOS11以前-1" class="headerlink" title="在iOS11以前"></a>在iOS11以前</h2><p>重写<code>insertSubview:atIndex</code>方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- (void)insertSubview:(UIView *)view atIndex:(NSInteger)index &#123;</span><br><span class="line">    [super insertSubview:view atIndex:index];</span><br><span class="line">    DLog(@&quot;insertSubview&quot;);</span><br><span class="line">    if ([view isKindOfClass:NSClassFromString(@&quot;UITableViewCellDeleteConfirmationView&quot;)]) &#123;</span><br><span class="line">        for (UIButton *btn in view.subviews) &#123;</span><br><span class="line"></span><br><span class="line">            if ([btn isKindOfClass:[UIButton class]]) &#123;</span><br><span class="line">                [btn setBackgroundColor:[UIColor clearColor]];</span><br><span class="line">                [btn mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                    make.width.mas_equalTo(adaptWidth(35));</span><br><span class="line">                    make.height.mas_equalTo(adaptWidth(35));</span><br><span class="line">                    make.centerX.mas_equalTo(0);</span><br><span class="line">                    make.centerY.mas_equalTo(0);</span><br><span class="line">                &#125;];</span><br><span class="line"></span><br><span class="line">                [btn setTitle:nil forState:UIControlStateNormal];</span><br><span class="line">                UIImage *img = [IMAGE(@&quot;list_deleting&quot;) imageForThemeColor:[UIColor redColor]];</span><br><span class="line">                [btn setImage:img forState:UIControlStateNormal];</span><br><span class="line">                [btn setImage:img forState:UIControlStateHighlighted];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="iOS11-1"><a href="#iOS11-1" class="headerlink" title="iOS11+"></a>iOS11+</h2><p>新建并使用一个继承于UITableView的控件，重写<code>layoutSubviews</code>方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">- (void)layoutSubviews&#123;</span><br><span class="line">    [super layoutSubviews];</span><br><span class="line"></span><br><span class="line">    //iOS11版本以上,自定义删除按钮:</span><br><span class="line">    if ([[[UIDevice currentDevice] systemVersion] doubleValue] &gt;= 11.0) &#123;</span><br><span class="line">        for (UIView *subview in self.subviews)</span><br><span class="line">        &#123;</span><br><span class="line">            if([subview isKindOfClass:NSClassFromString(@&quot;UISwipeActionPullView&quot;)])</span><br><span class="line">            &#123;</span><br><span class="line">                UIView *swipeActionPullView = subview;</span><br><span class="line">                swipeActionPullView.backgroundColor =  [UIColor clearColor];</span><br><span class="line"></span><br><span class="line">                UIButton *swipeActionStandardBtn = subview.subviews[0];</span><br><span class="line">                if ([swipeActionStandardBtn isKindOfClass:NSClassFromString(@&quot;UISwipeActionStandardButton&quot;)]) &#123;</span><br><span class="line"></span><br><span class="line">                    [swipeActionStandardBtn mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                        make.width.mas_equalTo(adaptWidth(35));</span><br><span class="line">                        make.height.mas_equalTo(adaptWidth(35));</span><br><span class="line">                        make.left.mas_equalTo(0);</span><br><span class="line">                        make.centerY.mas_equalTo(0);</span><br><span class="line">                    &#125;];</span><br><span class="line">                    [swipeActionStandardBtn setTitle:nil forState:UIControlStateNormal];</span><br><span class="line">                    [swipeActionStandardBtn setImage:[IMAGE(@&quot;list_deleting&quot;) imageForThemeColor:[UIColor redColor]] forState:UIControlStateNormal];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>*在iOS11以前，左滑cell不会走<code>layoutSubviews</code>的方法。在iOS11上，左滑时tableView不会走<code>insertSubview:atIndex</code>方法。</p>
<p><img src="https://ws2.sinaimg.cn/large/0069RVTdgy1fv12w0xbwqj30lm05gade.jpg" alt=""></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/07/自定义UITableView左滑删除样式/" data-id="ck8jtbs7t0016v1bu4k6rhco7"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UITableView/">UITableView</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-Diary" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/09/05/Diary/"
    >Diary</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/09/05/Diary/" class="article-date">
  <time datetime="2018-09-05T06:28:00.000Z" itemprop="datePublished">2018-09-05</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/随记/">随记</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="2018年9月5日-周三"><a href="#2018年9月5日-周三" class="headerlink" title="2018年9月5日 周三"></a>2018年9月5日 周三</h3><hr>
<p>今天尝试着将小程序上传提交审核了。<br>从8月8日创建项目开始，历时将近一个月时间，算是做了点东西出来。<br>一个产品在设计伊始应该先有个原型，但是我不是产品经理，所以我就用Page画了一些简单的图形，来提现界面的雏形。<br>然后…然后就直接上手开发了。<br>可发过程中也遇到了很多问题，例如如何获取小程序的全局变量，如何去适配屏幕的高宽，单位的使用，是用px，还是rpx，等等，等等<br>不过好在，所有这些问题，在搜索引擎的帮助下基本都能解决。<br>对JS的感觉是，既陌生又熟悉，因为同时在学习Swift的缘故，发现二者还是有一些相似之处。<br>HTML和CSS是上大学那会儿学的，写的时候，还是不得不时不时查阅文档才能达到想要的效果。<br>最近，腾讯还上线了云开发，但是目前还在公测阶段，需要申请公测资格，我填写了好几次信息，都没有收到允许公测的邮件..<br>所有后面直接用了Bomb的后台云。<br>Bomb后端云的免费版每月有10万次的API调用额度，20GB的存储空间，20GB的流量，以及30条短信。<br>如果用完了或者不够用，也可以按需充值。还是蛮方便的<br>这个小项目下做来，有些感慨，在做事情之前，还是应该有相对充分的准备。<br>对于不熟悉的语言，按需学习做项目的方式，会让人特别难受，特别是前期，还处于摸索的阶段，基本上是五行代码一小查，十行代码一大查的状态。<br>小程序的页面花了大概三周的时间，每天基本只用半天的时间去写（下午学习Swift），9个页面，包括信息的展示页面，和信息的发布界面，以及个人中心页面，最后只用来两个信息展示页面…内容的展示姑且先用CVS记录，再导入数据库进行管理。是骡子是马，先拉出去溜溜看吧。<br>估计在小程序上线过程中，还会遇到一些问题，不知道会不会因为功能过于简单，直接不让上了…<br><br></p>
<h3 id="2018年9月2日-周一"><a href="#2018年9月2日-周一" class="headerlink" title="2018年9月2日 周一"></a>2018年9月2日 周一</h3><hr>
<p>使用Bomb作为小程序的后端，在线编辑数据库，亦可导入cvs的文件，非常方便使用。<br>不需要自己写后端代码，甚至连服务器都不需要部署跟购买，在满足需求的程度上够用了。</p>
<p><br></p>
<h3 id="2018年2月11日-周日"><a href="#2018年2月11日-周日" class="headerlink" title="2018年2月11日 周日"></a>2018年2月11日 周日</h3><hr>
<p>添加了Livere评论控件，从此以后文章可以被评论了：）</p>
<p><br></p>
<h3 id="2018年2月9日-周五"><a href="#2018年2月9日-周五" class="headerlink" title="2018年2月9日 周五"></a>2018年2月9日 周五</h3><hr>
<p>发现博客首页的_content内容摘要部分部分，无法点击进入文章详情。今天就在archer主题的文件里做了个小改动，实现内容的点击事件<br>实现方法也非常简单。首先需要找到首页的布局文件,其文件目录大概是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/blogRootDir/themes/archer/layout/index.ejs</span><br></pre></td></tr></table></figure></p>
<p>使用文档编辑器打开<code>index.ejs</code>文件，找到以下内容：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"abstract-content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">_content</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>改成如下代码，就搞定了：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"abstract-title"</span> <span class="attr">href</span> = <span class="string">"&lt;%- url_for(_post.path) %&gt;"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"abstract-content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">%-</span> <span class="attr">_content</span> %&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="2018年2月8日-周四"><a href="#2018年2月8日-周四" class="headerlink" title="2018年2月8日 周四"></a>2018年2月8日 周四</h3><hr>
<p>今天写下第一篇，和技术有一点点关系的博客。虽然大部分内容是通过粘贴和借鉴的。不过在排版和Markdown的语法上，还是得到了学习。<br>想对自己说，再接再厉吧。<br>以后想通过Diary这个页面，记录自己生活和学习的点滴，希望在未来的某一天，能看到自己逐步地成长。</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/05/Diary/" data-id="ck8jtbs770008v1burqrfxf9k"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Diary/">Diary</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Life/">Life</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/成长/">成长</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
    <article id="post-使用Xcode的Instruments-Leaks-监测App的内存泄漏问题" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/06/20/使用Xcode的Instruments-Leaks-监测App的内存泄漏问题/"
    >使用Xcode的Instruments(Leaks)监测App的内存泄漏问题</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/06/20/使用Xcode的Instruments-Leaks-监测App的内存泄漏问题/" class="article-date">
  <time datetime="2018-06-20T08:58:13.000Z" itemprop="datePublished">2018-06-20</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>最近项目提交App Store审核，有些闲暇时间，打算用Instruments工具里的Leaks<br>检查一下项目中存在的内存泄漏问题。</p>
<h4 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h4><h5 id="1-edit-scheme"><a href="#1-edit-scheme" class="headerlink" title="1.edit scheme"></a>1.edit scheme</h5><p>修改为测试环境<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayq6uqwk2j30jk0e4gnd.jpg" alt=""><br>将Profile中的Build Configuration选为Debug<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayq6ull6nj31ds0s0whn.jpg" alt=""></p>
<h5 id="2-Debug-Information-Format"><a href="#2-Debug-Information-Format" class="headerlink" title="2.Debug Information Format"></a>2.Debug Information Format</h5><p>设置调试运行的时候生成 dSYM文件（用于代码定位）</p>
<p><code>Build Settings --&gt; Debug Information Format</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqazbj7qj31jn0u0k00.jpg" alt=""></p>
<h4 id="二、开始监测"><a href="#二、开始监测" class="headerlink" title="二、开始监测"></a>二、开始监测</h4><h5 id="1-打开Instruments"><a href="#1-打开Instruments" class="headerlink" title="1.打开Instruments"></a>1.打开Instruments</h5><p>在Xcode的导航栏中找到Instruments。</p>
<p><code>Xcode --&gt; Open Developer Tool --&gt; Instruments</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqbb0inkj30qg0gegsf.jpg" alt=""></p>
<h5 id="2-双击选择Leaks"><a href="#2-双击选择Leaks" class="headerlink" title="2.双击选择Leaks"></a>2.双击选择Leaks</h5><p><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqbamrugj316s0o278d.jpg" alt=""></p>
<h5 id="3-选择设备和项目"><a href="#3-选择设备和项目" class="headerlink" title="3.选择设备和项目"></a>3.选择设备和项目</h5><p>找到运行的设备和正在运行的项目。</p>
<p>选好设备和项目，点击左侧的大红点，项目会在对应的设备中重新运行一次。并做好监测准备<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqbac3owj31ka0u0n43.jpg" alt=""></p>
<h5 id="4-内存监测"><a href="#4-内存监测" class="headerlink" title="4.内存监测"></a>4.内存监测</h5><p>由于Leaks是动态监测，所以需要一边手动操作App，一边观察Leaks界面上的变化。当出现红色叉叉时，说明出现了内存泄漏，可以暂停进程，进行查看<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqba1hkvj30sc0kg40a.jpg" alt=""></p>
<p>5.定位内存泄漏的位置<br>选择 <code>Leaks ——&gt; Call Tree</code>，最底下会出现4个选框<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqcb41w2j31gu0u0wjr.jpg" alt=""></p>
<p>5.1 点击第二个<code>Call Tree</code>，勾选 <code>Invert Call Tree</code> 和 <code>Hide System Libraries</code></p>
<p><strong>勾选前</strong><br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqcan6nrj31ha0u0n3k.jpg" alt=""></p>
<p><strong>勾选后</strong><br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqc9pgknj31hj0u0aj8.jpg" alt=""></p>
<h5 id="6-确认位置，修改代码"><a href="#6-确认位置，修改代码" class="headerlink" title="6.确认位置，修改代码"></a>6.确认位置，修改代码</h5><p>此时显示的就是若干条内存泄漏的代码部分，选择其中一条双击，即可显示代码。还可直接跳转到代码在Xcode中额具体位置<br><img src="https://tva1.sinaimg.cn/large/006tNbRwly1gayqc9daqlj31hc0u0gw8.jpg" alt=""></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/20/使用Xcode的Instruments-Leaks-监测App的内存泄漏问题/" data-id="ck8jtbs7k000nv1bubm6iovqa"
        class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Instruments/">Instruments</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Leaks/">Leaks</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Xcode/">Xcode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/内存泄漏/">内存泄漏</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/调试优化/">调试优化</a></li></ul>

    </footer>

  </div>

  

  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2018-2020
        GG266
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s4.cnzz.com/z_stat.php?id=1278583018&amp;web_id=1278583018'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    
      <aside class="sidebar">
        
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/avatar.svg" alt="GG266的个人博客"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">



<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  
  

  </div>
</body>

</html>